---
import type { CollectionKey } from "astro:content";
import type { CollectionEntry } from "astro:content";
import { readFile } from "fs/promises";

interface Props {
  entry: CollectionEntry<CollectionKey>;
}

const { entry } = Astro.props;
const params = new URLSearchParams();
params.set("id", entry.id);
params.set("type", entry.collection);
if (import.meta.env.PROD && entry.filePath) {
  params.set("content", await readFile(entry.filePath, "utf8"));
}
const url = `${import.meta.env.BASE_URL}edit/?${params}`;
---

<a href={url}>Edit this {entry.collection.replace(/s$/, "")}</a>
